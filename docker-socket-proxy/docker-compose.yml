services:
  socket-proxy:
    image: 11notes/socket-proxy:2.1.7@sha256:4d7c4bccfd20726dda6c92e49e2bf15c635b43da4868d97812a45d8f1e3a4c1d
    container_name: docker-socket-proxy
    restart: "unless-stopped"
    read_only: true
    user: "0:${DOCKER_GID:?Missing variable DOCKER_GID}" # root:docker
    environment:
      - TZ=${TZ:-Etc/UTC}
      - SOCKET_PROXY_HTTP_LISTEN_IP=${LISTEN_IP:-127.0.0.1}
    volumes:
      - "/run/docker.sock:/run/docker.sock:ro" 
      - "socket-proxy.run:/run/proxy"
    ports:
      - "${PORT:-2375}:2375"

volumes:
  socket-proxy.run: